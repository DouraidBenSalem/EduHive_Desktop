<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/17"
   fx:controller="Controllers.StageController" prefHeight="650.0" prefWidth="1000.0">
    
    <!-- Include NavBar on the left side -->
    <left>
        <fx:include source="navBar.fxml" />
    </left>
    
    <!-- Main content on the center -->
    <center>
        <StackPane>
            <VBox spacing="0">
                <!-- Search Bar -->
                <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 10; -fx-background-color: #f4f4f4;">
                    <Label text="Rechercher:" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="searchField" promptText="Rechercher par entreprise..." style="-fx-pref-width: 300;"/>
                </HBox>

                <!-- Main Content -->
                <ScrollPane fitToWidth="true" style="-fx-background-color: #f4f4f4;" VBox.vgrow="ALWAYS">
                    <FlowPane fx:id="cardsContainer" hgap="20" vgap="20" style="-fx-background-color: #f4f4f4;">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                    </FlowPane>
                </ScrollPane>
            </VBox>

            <!-- Add Button (Floating Action Button) -->
            <Button fx:id="addButton" text="+" 
                    style="-fx-background-radius: 30; -fx-min-width: 60; -fx-min-height: 60; -fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 24;"
                    StackPane.alignment="BOTTOM_RIGHT">
                <StackPane.margin>
                    <Insets right="30" bottom="30"/>
                </StackPane.margin>
            </Button>

            <!-- Popup Form Dialog -->
            <VBox fx:id="formPopup" style="-fx-background-color: white; -fx-padding: 20; -fx-spacing: 10; -fx-background-radius: 5; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 10, 0, 0, 0);"
                  maxWidth="400" maxHeight="500" visible="false">
                
                <HBox alignment="CENTER_RIGHT" spacing="10">
                    <Text style="-fx-font-size: 18;" text="Nouveau Stage"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="closeFormButton" text="×" 
                            style="-fx-background-color: transparent; -fx-font-size: 18;"/>
                </HBox>

                <Label text="Titre:"/>
                <TextField fx:id="titreField"/>

                <Label text="Entreprise:"/>
                <TextField fx:id="entrepriseField"/>

                <Label text="Description:"/>
                <TextArea fx:id="descriptionArea" wrapText="true"/>

                <Label text="Durée:"/>
                <TextField fx:id="dureeField"/>

                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button fx:id="saveButton" text="Enregistrer"
                            style="-fx-background-color: #2196F3; -fx-text-fill: white;"/>
                    <Button fx:id="cancelButton" text="Annuler"/>
                </HBox>
            </VBox>
        </StackPane>
    </center>
</BorderPane>